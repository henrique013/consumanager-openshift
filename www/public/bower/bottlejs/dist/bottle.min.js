/**
 * BottleJS v1.4.0 - 2016-08-03
 * A powerful dependency injection micro container
 *
 * Copyright (c) 2016 Stephen Young
 * Licensed MIT
 */

(function(a){"use strict";var b=0,c=Array.prototype.slice,d=[],e=function(a,b){return a.concat(b)},f=function(a,b,c){var d=a[b];return d||(d=a[b]={}),c&&!d[c]&&(d[c]=[]),c?d[c]:d},g=function(a,b,c){return f(d,b,c).map(h.bind(null,a)).reduce(e,f(a,b,c)).concat(f(a,b,"__global__"))},h=function(a,b){return f(a,b.id,b.fullname)},i=function(b,c){var d=b[c];if(d===a&&O.strict)throw new Error("Bottle was unable to resolve a service.  `"+c+"` is undefined.");return d},j=function(a){return a.split(".").reduce(i,this)},k=function(a,b,c,d){"function"==typeof c&&(d=c,c="__global__"),f(a,b,c).push(d)},l=function(a,b){var c=a.split(".");return a=c.pop(),m.call(c.reduce(L,this.container),a,b),this},m=function(a,b){Object.defineProperty(this,a,{configurable:!1,enumerable:!0,value:b,writable:!1})},n=[],o=function(a,b){return k(n,this.id,a,b),this},p=[],q=function(a){return k(p,this.id,a),this},r=function(a){return(a||[]).map(j,this.container)},s=function(a,b){return E.call(this,a,function(){this.$get=b})},t=function(a,b){return s.call(this,a,function(a){return{instance:b.bind(b,a)}})},u=function(a){return!/^\$(?:register|list)$|Provider$/.test(a)},v=function(a){return Object.keys(a||this.container||{}).filter(u)},w=[],x=function(a,b,c,d){var e=g(w,a,b),f={configurable:!0,enumerable:!0};return e.length?f.get=function(){var a=0,b=function(d){if(d)throw d;e[a]&&e[a++](c,b)};return b(),c}:(f.value=c,f.writable=!0),Object.defineProperty(d,b,f),d[b]},y=function(a,b){return k(w,this.id,a,b),this},z={},A=function(a){var b;return a?(b=z[a],b||(z[a]=b=new N,b.constant("BOTTLE_NAME",a)),b):new N},B=[],C=[],D=function(a,b){return b(a)},E=function(a,b){var c,d,e,g;return d=f(C,this.id),c=a.split("."),d[a]&&1===c.length&&!this.container[a+"Provider"]?void 0:(d[a]=!0,e=c.shift(),g=c.length?G:F,g.call(this,e,b,a,c))},F=function(b,c){var d,e,f,h;return h=this.id,f=this.container,d=b+"Provider",e=Object.create(null),e[d]={configurable:!0,enumerable:!0,get:function(){var a=new c;return delete f[d],f[d]=a,a}},e[b]={configurable:!0,enumerable:!0,get:function(){var c,e=f[d];return e&&(c=g(n,h,b).reduce(D,e.$get(f)),delete f[d],delete f[b]),c===a?c:x(h,b,c,f)}},Object.defineProperties(f,e),this},G=function(a,b,c,e){var g,h,i,j;return j=this.id,h=f(B,j),g=h[a],g||(this.container[a]=(g=h[a]=N.pop()).container),i=e.join("."),g.provider(i,b),k(d,g.id,i,{fullname:c,id:j}),this},H=function(b){var c=b.$value===a?b:b.$value;return this[b.$type||"service"].apply(this,[b.$name,c].concat(b.$inject||[]))},I=function(a){return f(p,this.id,"__global__").forEach(function(b){b(a)}),this},J=function(a,b){var d=arguments.length>2?c.call(arguments,2):null,e=this;return s.call(this,a,function(){return d&&(d=d.map(j,e.container),d.unshift(b),b=b.bind.apply(b,d)),new b})},K=function(a,b){var c;return c=a.split("."),a=c.pop(),M.call(c.reduce(L,this.container),a,b),this},L=function(a,b){var c=a[b];return c||(c={},M.call(a,b,c)),c},M=function(a,b){Object.defineProperty(this,a,{configurable:!0,enumerable:!0,value:b,writable:!0})},N=function Q(a){return this instanceof Q?(this.id=b++,void(this.container={$register:H.bind(this),$list:v.bind(this)})):Q.pop(a)};N.prototype={constant:l,decorator:o,defer:q,digest:r,factory:s,instanceFactory:t,list:v,middleware:y,provider:E,register:H,resolve:I,service:J,value:K},N.pop=A,N.list=v;var O=N.config={strict:!1},P={"function":!0,object:!0};!function(a){var b=P[typeof exports]&&exports&&!exports.nodeType&&exports,c=P[typeof module]&&module&&!module.nodeType&&module,d=c&&c.exports===b&&b,e=P[typeof global]&&global;!e||e.global!==e&&e.window!==e||(a=e),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(a.Bottle=N,define(function(){return N})):b&&c?d?(c.exports=N).Bottle=N:b.Bottle=N:a.Bottle=N}(P[typeof window]&&window||this)}).call(this);
//# sourceMappingURL=bottle.min.js.map